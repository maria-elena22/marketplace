# Use the official OpenJDK 8 image as a parent image
FROM openjdk:17-alpine3.14

# Set the working directory to /app
WORKDIR /app

# Copy the current directory contents into the container at /app
COPY . /app
           
# Set the environment variable for the application
ENV APP_NAME marketplace

# Build the application using Maven with the extracted variables
RUN ./mvnw -T 8 clean package -DskipTests

# Expose port 8080 for the application
EXPOSE 8081

# Start the application using the JAR file generated by Maven
CMD ["java", "-jar", "target/marketplace-0.0.1.jar", "--spring.config.location=classpath:/application-prod.properties"]
