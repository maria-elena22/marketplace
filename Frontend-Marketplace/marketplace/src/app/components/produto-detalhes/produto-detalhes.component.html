<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<br>

<br>
<div class="container">
    <a href="/produtos" style="cursor: pointer;"><i class="bi bi-arrow-bar-left"></i> Ver outros produtos</a>
    <div class="card">
        <div class="card-body">
            <div class="row">
                <div class="col-lg-5 col-md-5 col-sm-6">
                    <div class="white-box text-center"><img src="https://www.bootdey.com/image/350x350/00CED1/000000" class="img-responsive"></div>
                </div>
                <div class="col-lg-7 col-md-7 col-sm-6">
                    <h3 class="box-title"><b>{{produto.nome}}</b></h3>
                    <h5 class="box-title">Subcategorias</h5>
                    <div *ngFor="let categoria of produto.subCategorias">
                        <ul class="list-unstyled">
                            <li><i class="bi bi-caret-right-fill text-primary"></i> {{categoria.nomeSubCategoria}}</li>
                        </ul>
                    </div>
                    <form [formGroup]="addCarrinhoForm" (ngSubmit)="onSubmitProduto()" >
                        <div>
                            <br>
                            <label for="quantidade"><b>Quantidade:</b> &nbsp;</label>
            
                            <input min="0" max="100" step="1" type="number" id="quantidade" formControlName="quantidade" required>
                        </div>
                        <br>
        
                        <label for="fornecedor"><b>Escolha um dos fornecedores:</b> <p>(de forma a ajudar os négocios locais, escolha um perto de si)</p></label>
                        <div>
                            <label *ngFor="let precoFornecedor of this.produto.precoFornecedores">
                                <input  required formControlName="fornecedor" type="radio" [value]="precoFornecedor.fornecedor!.idUtilizador!"> 
                                {{precoFornecedor.fornecedor!.nome}} - {{precoFornecedor.preco}}€ - Distância: <!--{{getDistancia(precoFornecedor.fornecedor!).toFixed(2)}}--> km &nbsp;
                                <br>
                            </label>
                        </div>
                        <br>
         
                        <button [disabled]="!addCarrinhoForm.valid" class="btn btn-outline-info mt-auto" style="margin-left: 10%;">Carrinho</button>
                        &nbsp; <a style ="color: #dc3545" *ngIf="!addCarrinhoForm.valid">Tem de preencher todos os campos</a>
                    </form>

                    
                    
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal-wrapper" [class.visible]="showAnswer">
    <div class="modal-container">
        <button class="modal-close-btn" (click)="toggleAnswer()" style="text-align: right;">FECHAR</button>
        <br>
        
      <h2 [style.color]="success ? '#1cc88a' : 'red'" class="modal-title">{{answer}}</h2>
      <br>      
      <a href="/produtos">Ir para todos os produtos</a>
      <p></p>
      <a href="/cesto">Ir para o cesto</a>
      <br>
    </div>
  </div>